(()=>{"use strict";const e=new URLSearchParams;e.append("q",'"subject:Architecture"'),e.append("key","AIzaSyBmzK056Ap_sCs7XQ4lTy1_zoW718QRC60"),e.append("printType","books"),e.append("startIndex","0"),e.append("maxResults","6"),e.append("langRestrict","en");const t=[{url:"img/banner1.png"},{url:"img/banner2.png"},{url:"img/banner3.png"}],a=[{categoriesName:"Architecture"},{categoriesName:"Art & Fashion"},{categoriesName:"Biography"},{categoriesName:"Business"},{categoriesName:"Crafts & Hobbies"},{categoriesName:"Drama"},{categoriesName:"Fiction"},{categoriesName:"Food & Drink"},{categoriesName:"Health & Wellbeing"},{categoriesName:"History & Politics"},{categoriesName:"Humor"},{categoriesName:"Poetry"},{categoriesName:"Psychology"},{categoriesName:"Science"},{categoriesName:"Technology"},{categoriesName:"Travel & Maps"}],n=document.querySelector(".slider"),i=n.querySelector(".slider__images");let r,o=0;function s(e){i.querySelector(".active").classList.remove("active"),i.querySelector(`.n${e}`).classList.add("active"),r.querySelector(".active").classList.remove("active"),r.querySelector(`.n${e}`).classList.add("active")}let c=[];const l=document.querySelector(".btn"),d=document.getElementById("cart-count");d.textContent=+localStorage.length,t.forEach(((e,t)=>{let a=document.createElement("div");a.classList=`image n${t} ${t?"":"active"}`,a.dataset.index=t,a.style.backgroundImage=`url(${e.url})`,i.appendChild(a)})),function(){let e=document.createElement("div");e.classList="slider__points",t.forEach(((t,a)=>{let n=document.createElement("div");n.classList=`slider__points-item n${a} ${a?"":"active"}`,n.dataset.index=a,n.addEventListener("click",(()=>{o=a,s(o)})),e.appendChild(n)})),n.appendChild(e),r=n.querySelector(".slider__points")}(),setInterval((()=>{let e=+i.querySelector(".active").dataset.index;s(e===t.length-1?0:e+1)}),5e3);const g=document.querySelector(".categories");function m(){(async function(){try{const t=await fetch(`https://www.googleapis.com/books/v1/volumes?${e}`);if(!t.ok)throw new Error("Response not ok");return await t.json()}catch(e){console.error("ERROR:",e)}})().then((t=>{let a=[];t&&(console.log(t),a=t.items.map((e=>({authors:e.volumeInfo.authors?.map((e=>({author:e}))),title:e.volumeInfo.title,averageRating:e.volumeInfo.averageRating,ratingsCount:e.volumeInfo.ratingsCount,description:e.volumeInfo.description,listPrice:e.saleInfo.listPrice?.amount,imageLink:e.volumeInfo.imageLinks?.thumbnail,id:e.id}))),console.log(a),function(t){0==+e.get("startIndex")&&(p.innerHTML=""),t.forEach(((e,t)=>{let a=[];a=Object.entries(e);const n=document.createElement("div");n.classList="book-item",n.dataset.id=e.id;let i=document.createElement("div");i.classList="thumbnail-item",i.innerHTML=`<img class="thumbnailImg" src="${void 0===e.imageLink?u:e.imageLink}">`,n.appendChild(i);let r=document.createElement("div");r.classList="bookInfo",r.dataset.index=v+t;let o=[];e.authors?.forEach((e=>{o+=`${e.author},`})),a.forEach((e=>{void 0===e[1]&&(e[1]="");let t=document.createElement("div");t.classList=`${e[0]}`,r.appendChild(t)}));r.querySelector(".authors").innerHTML=`<span>${o}</span>`,r.querySelector(".title").innerHTML=`<h4>${a[1][1]}</h4>`,r.querySelector(".averageRating").innerHTML='<div class="rating">\n            <div class="rating__body">\n                <div class="rating__active">\n                    <div class="rating__items">\n                        <input type="radio" class="rating__item" value="1" name="rating">\n                            <input type="radio" class="rating__item" value="2" name="rating">\n                                <input type="radio" class="rating__item" value="3" name="rating">\n                                    <input type="radio" class="rating__item" value="4" name="rating">\n                                        <input type="radio" class="rating__item" value="5" name="rating">\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>',r.querySelector(".ratingsCount").innerHTML=`<span>${a[3][1]} review </span>`,r.querySelector(".description").innerHTML=`<p>${a[4][1]}</p>`,r.querySelector(".listPrice").innerHTML=`<h4>${a[5][1].toLocaleString("en-US",{style:"currency",currency:"USD"})}</h4>`,r.querySelector(".rating__active").style.width=a[2][1]/.05+"%",""===a[2][1]&&(r.querySelector(".averageRating").style.display="none"),""===a[3][1]&&(r.querySelector(".ratingsCount").style.display="none"),r.innerHTML+=`<button class="add-btn n${r.dataset.index}">BUY NOW</button>`,n.appendChild(r),p.appendChild(n)}))}(a)),c=[...c,...a],function(){for(let e=0;e<localStorage.length;e++){let t=localStorage.key(e);console.log(t),c.forEach(((e,a)=>{if(e.id===t){const e=document.querySelector(`.add-btn.n${a}`);e.textContent="IN THE CART",e.classList.add("inTheCart")}}))}}()}))}a.forEach(((t,n)=>{let i=document.createElement("div");i.classList=`category n${n} ${n?"":"active"}`,i.innerHTML+=`<a href="#" onclick="return false">${t.categoriesName}</a>`,i.dataset.index=n,i.addEventListener("click",(()=>{e.set("startIndex","0"),function(e){g.querySelector(".active").classList.remove("active"),g.querySelector(`.n${e}`).classList.add("active")}(n),function(t){v=0,c=[],e.set("q",`"subject:${a[t].categoriesName}"`),m()}(n)})),g.appendChild(i)})),m();let u="img/placeHolder.png";const p=document.querySelector(".bookList");let v=0;p.addEventListener("click",(function(e){e.target&&e.target.classList.contains("add-btn")&&("BUY NOW"===e.target.innerHTML?(e.target.textContent="IN THE CART",localStorage.setItem(`${e.target.parentElement.parentElement.dataset.id}`,`${JSON.stringify(c[e.target.parentElement.dataset.index])}`),d.textContent=+localStorage.length,e.target.classList.add("inTheCart")):(e.target.textContent="BUY NOW",localStorage.removeItem(`${e.target.parentElement.parentElement.dataset.id}`),d.textContent=+localStorage.length,e.target.classList.remove("inTheCart")))})),l.addEventListener("click",(()=>{v+=6,e.set("startIndex",""+(+e.get("startIndex")+6)),console.log(e.get("startIndex")),m()}))})();